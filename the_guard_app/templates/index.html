{% load static %}
{% include 'the_guard_app/../parts/header.html' %}

<style>
.parent{
	position:relative;
}
.childtext{
	position:absolute;
	top: 50%;
	transform:translateY(-50%);
}
.my_btn{
	margin-bottom: 5px;
}
</style>


<body>

<div class="row">
    <p class="col-md-3 col-sm-10 offset-sm-1">Welcome {{ user.username }} !!!</p>
    <button class="btn btn-default col-md-2 offset-md-5 col-sm-10 offset-sm-1 my_btn">
        <a href="{% url 'logout' %}">Log out</a>
    </button>

</div>


<div class='camera col-md-2'>
{% for key, value in rooms.items %}
<button class="btn btn-default col-md-10 offset-md-1 my_btn">
<div class="row parent">
<img class ="col-md-4" src="{% static 'pics/camera.png' %}" />
	<h4 class = "childtext col-md-8" >{{key}}</h4>
</div>
</button>
<!--    <ul>
        {% for sensor, value2 in value.items %}
            <li>{{sensor}} : {{ value2.value}}</li>
        {% endfor %}
    </ul> -->
{% endfor %}
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<video id="video" onclick="playPause()"></video>
<script>
      if(Hls.isSupported()) {
        var video = document.getElementById('video');
        var hls = new Hls();
        hls.loadSource('http://52.236.165.15.:80/hls/test.m3u8');
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED,function() {
          video.play();
      });
     }
     var myVideo = document.getElementById("video");

     function playPause() {
        if (myVideo.paused)
            myVideo.play();
        else
            myVideo.pause();
    }

</script>
<script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
<script>
  var config = {
    apiKey: "AIzaSyCHL_Er9JtpQbadJtoaZbvYusIY-tBRVC0",
    authDomain: "guardapp-ac65a.firebaseapp.com",
    databaseURL: "https://guardapp-ac65a.firebaseio.com",
    storageBucket: "guardapp-ac65a.appspot.com",
    messagingSenderId: "299985780377"
  };
  firebase.initializeApp(config);
  var db = firebase.database();
  var rooms = db.ref('sensors/');
  rooms.on('value', function(snapshot) {
    console.log(snapshot.val());
     });
  </script>

</body>
